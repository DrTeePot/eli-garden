<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Tristan's Garden</title>
    <!-- <link rel="stylesheet" href="style.css"> -->
    <style type="text/css">
      body {
        font-family: 'Trebuchet MS', sans-serif;
        padding: 30px 50px;
        background-color: #fdfdfe;
        max-width: 650px;
        margin: 0 auto;
      }
      ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
      }
      li {
        margin: 0;
      }
      h3 {
        padding: 0px 0px;
        margin: 5px 0px;

      }
    </style>
    <script src="papaparse.min.js"></script>
    <script src="markdown-it.min.js"></script>

  </head>
  <body>
    <header>
      <h1>
        Garden of Thoughts
      </h1>
      <nav>
      </nav>
    </header>

    <main>
      <!-- <h2>  </h2> -->

      <ul id="thoughts">
        <li>
          <h3> Timestamp 1 </h3>
          <div><p>some text</p> </div>
        </li>
      </ul>
    </main>

    <script>
      var md = window.markdownit();
      const url = getThoughtURL();
      var container = document.getElementById('thoughts');

      Papa.parse(url, {
        download: true,
        worker: true,
        header: true,
        step: function(row) {
          const timestamp = row.data["timestamp"];
          const thought = row.data["body"];
          appendThought(container, `<li>${md.render(thought)}</li>`);

        },
        complete: function() {
          console.log("All done!");
        },
        error: function(error) {
          console.log(error);
        },
      });

      function appendThought(container, html) {
        var div = document.createElement('div');
        div.innerHTML += html;
        container.insertBefore(div, null);
      }

      function getThoughtURL() {
        "https://docs.google.com/spreadsheets/d/e/2PACX-1vSf2Kwv4OA-Pd5q3a6pdQkvBA9i0iDpD-fA6BFrX1dzH5VIGXK_XCPU9GW2p8HPyaOwU6QA155ezHkl/pub?gid=0&single=true&output=csv";
      }
    </script>
  </body>
</html>
